{
	"id": "6b76d0bf-b6b0-41f3-9dc6-c657bdc6ee83",
	"prevId": "dc0e4a05-fcbf-40dc-ab85-4ff61c438573",
	"version": "7",
	"dialect": "postgresql",
	"tables": {
		"public.food": {
			"name": "food",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "uuid",
					"primaryKey": true,
					"notNull": true,
					"default": "gen_random_uuid()"
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp with time zone",
					"primaryKey": false,
					"notNull": true,
					"default": "timezone\n        ('utc'::text, now())"
				},
				"name": {
					"name": "name",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"user_id": {
					"name": "user_id",
					"type": "uuid",
					"primaryKey": false,
					"notNull": true,
					"default": "auth\n        .\n        uid\n        ()"
				},
				"energy": {
					"name": "energy",
					"type": "real",
					"primaryKey": false,
					"notNull": true
				},
				"protein": {
					"name": "protein",
					"type": "real",
					"primaryKey": false,
					"notNull": true
				},
				"fat": {
					"name": "fat",
					"type": "real",
					"primaryKey": false,
					"notNull": true
				},
				"carbohydrates": {
					"name": "carbohydrates",
					"type": "real",
					"primaryKey": false,
					"notNull": true
				},
				"sugar": {
					"name": "sugar",
					"type": "real",
					"primaryKey": false,
					"notNull": false
				},
				"fibre": {
					"name": "fibre",
					"type": "real",
					"primaryKey": false,
					"notNull": false
				},
				"salt": {
					"name": "salt",
					"type": "real",
					"primaryKey": false,
					"notNull": false
				}
			},
			"indexes": {},
			"foreignKeys": {},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {},
			"policies": {
				"Authenticated users can insert their own food": {
					"name": "Authenticated users can insert their own food",
					"as": "PERMISSIVE",
					"for": "INSERT",
					"to": ["authenticated"],
					"withCheck": "(auth.uid()\n                     = user_id)"
				},
				"Enable delete for users based on user_id": {
					"name": "Enable delete for users based on user_id",
					"as": "PERMISSIVE",
					"for": "DELETE",
					"to": ["public"]
				},
				"User can only select their own foods": {
					"name": "User can only select their own foods",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["authenticated"]
				}
			},
			"checkConstraints": {},
			"isRLSEnabled": false
		},
		"public.habit_completions": {
			"name": "habit_completions",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "uuid",
					"primaryKey": true,
					"notNull": true,
					"default": "gen_random_uuid()"
				},
				"habit_id": {
					"name": "habit_id",
					"type": "uuid",
					"primaryKey": false,
					"notNull": true
				},
				"completed_at": {
					"name": "completed_at",
					"type": "date",
					"primaryKey": false,
					"notNull": true
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				}
			},
			"indexes": {
				"habit_completions_habit_id_idx": {
					"name": "habit_completions_habit_id_idx",
					"columns": [
						{
							"expression": "habit_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				},
				"habit_completions_completed_at_idx": {
					"name": "habit_completions_completed_at_idx",
					"columns": [
						{
							"expression": "completed_at",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {
				"habit_completions_habit_id_habit_id_fk": {
					"name": "habit_completions_habit_id_habit_id_fk",
					"tableFrom": "habit_completions",
					"tableTo": "habit",
					"columnsFrom": ["habit_id"],
					"columnsTo": ["id"],
					"onDelete": "cascade",
					"onUpdate": "no action"
				}
			},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {
				"habit_completion_unique": {
					"name": "habit_completion_unique",
					"nullsNotDistinct": false,
					"columns": ["habit_id", "completed_at"]
				}
			},
			"policies": {
				"users_view_own_completions": {
					"name": "users_view_own_completions",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["authenticated"],
					"using": "EXISTS (\n    SELECT 1 FROM habit \n    WHERE habit.id = habit_id \n    AND habit.user_id = auth.uid()\n  )"
				},
				"users_view_public_completions": {
					"name": "users_view_public_completions",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["public"],
					"using": "EXISTS (\n    SELECT 1 FROM habit \n    WHERE habit.id = habit_id \n    AND habit.visibility = 'public'\n  )"
				},
				"members_view_member_completions": {
					"name": "members_view_member_completions",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["authenticated"],
					"using": "EXISTS (\n    SELECT 1 FROM habit \n    WHERE habit.id = habit_id \n    AND habit.visibility = 'members'\n  )"
				},
				"users_insert_own_completions": {
					"name": "users_insert_own_completions",
					"as": "PERMISSIVE",
					"for": "INSERT",
					"to": ["authenticated"],
					"withCheck": "EXISTS (\n    SELECT 1 FROM habit \n    WHERE habit.id = habit_id \n    AND habit.user_id = auth.uid()\n  )"
				},
				"users_delete_own_completions": {
					"name": "users_delete_own_completions",
					"as": "PERMISSIVE",
					"for": "DELETE",
					"to": ["authenticated"],
					"using": "EXISTS (\n    SELECT 1 FROM habit \n    WHERE habit.id = habit_id \n    AND habit.user_id = auth.uid()\n  )"
				}
			},
			"checkConstraints": {},
			"isRLSEnabled": true
		},
		"public.habit": {
			"name": "habit",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "uuid",
					"primaryKey": true,
					"notNull": true,
					"default": "gen_random_uuid()"
				},
				"user_id": {
					"name": "user_id",
					"type": "uuid",
					"primaryKey": false,
					"notNull": true,
					"default": "auth.\n        uid\n        ()"
				},
				"name": {
					"name": "name",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"frequency_type": {
					"name": "frequency_type",
					"type": "text",
					"primaryKey": false,
					"notNull": true,
					"default": "'daily'"
				},
				"frequency_target": {
					"name": "frequency_target",
					"type": "integer",
					"primaryKey": false,
					"notNull": false
				},
				"frequency_days": {
					"name": "frequency_days",
					"type": "text[]",
					"primaryKey": false,
					"notNull": false
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				},
				"updated_at": {
					"name": "updated_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				},
				"color": {
					"name": "color",
					"type": "text",
					"primaryKey": false,
					"notNull": true,
					"default": "'#10b981'"
				},
				"visibility": {
					"name": "visibility",
					"type": "text",
					"primaryKey": false,
					"notNull": true,
					"default": "'private'"
				}
			},
			"indexes": {
				"habits_user_id_idx": {
					"name": "habits_user_id_idx",
					"columns": [
						{
							"expression": "user_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				},
				"habits_user_created_idx": {
					"name": "habits_user_created_idx",
					"columns": [
						{
							"expression": "user_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						},
						{
							"expression": "created_at",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {},
			"policies": {
				"users_view_own_habits": {
					"name": "users_view_own_habits",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["authenticated"],
					"using": "user_id = auth.uid()"
				},
				"users_view_public_habits": {
					"name": "users_view_public_habits",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["public"],
					"using": "visibility = 'public'"
				},
				"members_view_member_habits": {
					"name": "members_view_member_habits",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["authenticated"],
					"using": "visibility = 'members'"
				},
				"users_insert_own_habits": {
					"name": "users_insert_own_habits",
					"as": "PERMISSIVE",
					"for": "INSERT",
					"to": ["authenticated"],
					"withCheck": "user_id = auth.uid()"
				},
				"users_update_own_habits": {
					"name": "users_update_own_habits",
					"as": "PERMISSIVE",
					"for": "UPDATE",
					"to": ["authenticated"],
					"using": "user_id = auth.uid()",
					"withCheck": "user_id = auth.uid()"
				},
				"users_delete_own_habits": {
					"name": "users_delete_own_habits",
					"as": "PERMISSIVE",
					"for": "DELETE",
					"to": ["authenticated"],
					"using": "user_id = auth.uid()"
				}
			},
			"checkConstraints": {},
			"isRLSEnabled": true
		},
		"public.meal_items": {
			"name": "meal_items",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "uuid",
					"primaryKey": true,
					"notNull": true,
					"default": "gen_random_uuid()"
				},
				"user_id": {
					"name": "user_id",
					"type": "uuid",
					"primaryKey": false,
					"notNull": true,
					"default": "auth\n        .\n        uid\n        ()"
				},
				"food_id": {
					"name": "food_id",
					"type": "uuid",
					"primaryKey": false,
					"notNull": true
				},
				"date": {
					"name": "date",
					"type": "date",
					"primaryKey": false,
					"notNull": true
				},
				"meal_type": {
					"name": "meal_type",
					"type": "varchar(20)",
					"primaryKey": false,
					"notNull": true
				},
				"quantity": {
					"name": "quantity",
					"type": "real",
					"primaryKey": false,
					"notNull": true
				},
				"unit": {
					"name": "unit",
					"type": "varchar(20)",
					"primaryKey": false,
					"notNull": true,
					"default": "'g'"
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				},
				"updated_at": {
					"name": "updated_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				}
			},
			"indexes": {
				"meal_items_date_idx": {
					"name": "meal_items_date_idx",
					"columns": [
						{
							"expression": "date",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				},
				"meal_items_user_id_idx": {
					"name": "meal_items_user_id_idx",
					"columns": [
						{
							"expression": "user_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {
				"meal_items_food_id_food_id_fk": {
					"name": "meal_items_food_id_food_id_fk",
					"tableFrom": "meal_items",
					"tableTo": "food",
					"columnsFrom": ["food_id"],
					"columnsTo": ["id"],
					"onDelete": "cascade",
					"onUpdate": "no action"
				}
			},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {},
			"policies": {
				"Users can view own meal items": {
					"name": "Users can view own meal items",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["authenticated"],
					"using": "auth.uid() = \"meal_items\".\"user_id\""
				},
				"Users can insert own meal items": {
					"name": "Users can insert own meal items",
					"as": "PERMISSIVE",
					"for": "INSERT",
					"to": ["authenticated"],
					"withCheck": "auth.uid() =\"meal_items\".\"user_id\""
				}
			},
			"checkConstraints": {
				"quantity_positive": {
					"name": "quantity_positive",
					"value": "\"meal_items\".\"quantity\" > 0"
				}
			},
			"isRLSEnabled": false
		},
		"public.milestone": {
			"name": "milestone",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "uuid",
					"primaryKey": true,
					"notNull": true,
					"default": "gen_random_uuid()"
				},
				"user_id": {
					"name": "user_id",
					"type": "uuid",
					"primaryKey": false,
					"notNull": true,
					"default": "auth.uid()"
				},
				"name": {
					"name": "name",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"description": {
					"name": "description",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"color": {
					"name": "color",
					"type": "text",
					"primaryKey": false,
					"notNull": true,
					"default": "'#10b981'"
				},
				"visibility": {
					"name": "visibility",
					"type": "text",
					"primaryKey": false,
					"notNull": true,
					"default": "'private'"
				},
				"start_date": {
					"name": "start_date",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true
				},
				"reset_at": {
					"name": "reset_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": false
				},
				"celebrations": {
					"name": "celebrations",
					"type": "integer[]",
					"primaryKey": false,
					"notNull": true,
					"default": "'{7,30,100,365}'"
				},
				"reset_count": {
					"name": "reset_count",
					"type": "integer",
					"primaryKey": false,
					"notNull": true,
					"default": 0
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				},
				"updated_at": {
					"name": "updated_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				}
			},
			"indexes": {
				"milestones_user_id_idx": {
					"name": "milestones_user_id_idx",
					"columns": [
						{
							"expression": "user_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				},
				"milestones_visibility_idx": {
					"name": "milestones_visibility_idx",
					"columns": [
						{
							"expression": "visibility",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {},
			"policies": {
				"users_view_own_milestones": {
					"name": "users_view_own_milestones",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["authenticated"],
					"using": "user_id = auth.uid()"
				},
				"users_view_public_milestones": {
					"name": "users_view_public_milestones",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["public"],
					"using": "visibility = 'public'"
				},
				"users_insert_own_milestones": {
					"name": "users_insert_own_milestones",
					"as": "PERMISSIVE",
					"for": "INSERT",
					"to": ["authenticated"],
					"withCheck": "user_id = auth.uid()"
				},
				"users_update_own_milestones": {
					"name": "users_update_own_milestones",
					"as": "PERMISSIVE",
					"for": "UPDATE",
					"to": ["authenticated"],
					"using": "user_id = auth.uid()",
					"withCheck": "user_id = auth.uid()"
				},
				"users_delete_own_milestones": {
					"name": "users_delete_own_milestones",
					"as": "PERMISSIVE",
					"for": "DELETE",
					"to": ["authenticated"],
					"using": "user_id = auth.uid()"
				}
			},
			"checkConstraints": {},
			"isRLSEnabled": true
		},
		"public.profile": {
			"name": "profile",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "uuid",
					"primaryKey": true,
					"notNull": true,
					"default": "gen_random_uuid()"
				},
				"user_id": {
					"name": "user_id",
					"type": "uuid",
					"primaryKey": false,
					"notNull": true
				},
				"username": {
					"name": "username",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"bio": {
					"name": "bio",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"is_public": {
					"name": "is_public",
					"type": "boolean",
					"primaryKey": false,
					"notNull": true,
					"default": false
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				},
				"updated_at": {
					"name": "updated_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				}
			},
			"indexes": {
				"profile_username_idx": {
					"name": "profile_username_idx",
					"columns": [
						{
							"expression": "username",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				},
				"profile_user_id_idx": {
					"name": "profile_user_id_idx",
					"columns": [
						{
							"expression": "user_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {
				"profile_user_id_unique": {
					"name": "profile_user_id_unique",
					"nullsNotDistinct": false,
					"columns": ["user_id"]
				},
				"profile_username_unique": {
					"name": "profile_username_unique",
					"nullsNotDistinct": false,
					"columns": ["username"]
				}
			},
			"policies": {
				"users_view_own_profile": {
					"name": "users_view_own_profile",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["authenticated"],
					"using": "user_id = auth.uid()"
				},
				"users_view_public_profiles": {
					"name": "users_view_public_profiles",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["public"],
					"using": "is_public = true"
				},
				"users_update_own_profile": {
					"name": "users_update_own_profile",
					"as": "PERMISSIVE",
					"for": "UPDATE",
					"to": ["authenticated"],
					"using": "user_id = auth.uid()",
					"withCheck": "user_id = auth.uid()"
				}
			},
			"checkConstraints": {
				"username_length": {
					"name": "username_length",
					"value": "char_length(\"profile\".\"username\") >= 3 AND char_length(\"profile\".\"username\") <= 20"
				},
				"username_format": {
					"name": "username_format",
					"value": "\"profile\".\"username\" ~ '^[a-zA-Z0-9_-]+$'"
				},
				"bio_length": {
					"name": "bio_length",
					"value": "\"profile\".\"bio\" IS NULL OR char_length(\"profile\".\"bio\") <= 200"
				}
			},
			"isRLSEnabled": true
		},
		"public.spark": {
			"name": "spark",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "uuid",
					"primaryKey": true,
					"notNull": true,
					"default": "gen_random_uuid()"
				},
				"user_id": {
					"name": "user_id",
					"type": "uuid",
					"primaryKey": false,
					"notNull": true
				},
				"habit_id": {
					"name": "habit_id",
					"type": "uuid",
					"primaryKey": false,
					"notNull": true
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				}
			},
			"indexes": {
				"spark_habit_id_idx": {
					"name": "spark_habit_id_idx",
					"columns": [
						{
							"expression": "habit_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				},
				"spark_user_id_idx": {
					"name": "spark_user_id_idx",
					"columns": [
						{
							"expression": "user_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {
				"spark_user_id_profile_id_fk": {
					"name": "spark_user_id_profile_id_fk",
					"tableFrom": "spark",
					"tableTo": "profile",
					"columnsFrom": ["user_id"],
					"columnsTo": ["id"],
					"onDelete": "cascade",
					"onUpdate": "no action"
				},
				"spark_habit_id_habit_id_fk": {
					"name": "spark_habit_id_habit_id_fk",
					"tableFrom": "spark",
					"tableTo": "habit",
					"columnsFrom": ["habit_id"],
					"columnsTo": ["id"],
					"onDelete": "cascade",
					"onUpdate": "no action"
				}
			},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {
				"spark_profile_habit_unique": {
					"name": "spark_profile_habit_unique",
					"nullsNotDistinct": false,
					"columns": ["habit_id", "user_id"]
				}
			},
			"policies": {
				"users_insert_own_sparks": {
					"name": "users_insert_own_sparks",
					"as": "PERMISSIVE",
					"for": "INSERT",
					"to": ["authenticated"],
					"withCheck": "user_id = auth.uid()"
				},
				"users_view_all_sparks": {
					"name": "users_view_all_sparks",
					"as": "PERMISSIVE",
					"for": "SELECT",
					"to": ["public"],
					"using": "true"
				},
				"users_delete_own_sparks": {
					"name": "users_delete_own_sparks",
					"as": "PERMISSIVE",
					"for": "DELETE",
					"to": ["authenticated"],
					"withCheck": "user_id = auth.uid()"
				}
			},
			"checkConstraints": {},
			"isRLSEnabled": true
		}
	},
	"enums": {},
	"schemas": {},
	"sequences": {},
	"roles": {},
	"policies": {},
	"views": {},
	"_meta": {
		"columns": {},
		"schemas": {},
		"tables": {}
	}
}
